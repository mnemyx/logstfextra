## SupStats2 - Extra Details Parser
> A python + php script that parses out TF2 logs generated by F2's SupStats2. *This will not work with SupStats! It needs the detailed damage logs in order to work.*


## Example
> ###### [*noclasses_extrastats.py* Example](http://mnemyx.net/tfstats/index.php?log=l0620012&classes=false)
>
> ###### [*extrastats.py* Example](http://mnemyx.net/tfstats/index.php?log=l0620012)


## How it works
###### Python Part:
> 1. Requires the log file's location as a command line argument
> 2. Parses through the log, saves each line as an element of an array/list, & closes the log file
> 3. Then parses through the array of lines
>	* Will only account for damage dealt between "Round_Start" and "Round_Win" conditions
> 4. Serializes the python dictionaries for damaged received and damage given via json.dumps()


###### PHP Part:
> 1. Uses a $_GET variable to get the log file's name
> 2. Invokes python script via shell_exec()
> 3. Uses json_decode() to parse the json string to associative arrays
> 4. Displays the data


## JSON Structure
###### There are 2 versions of extrastats.py: *noclasses_extrastats.py* and *extrastats.py*. Their structures differ a bit as *noclasses_extrastats.py* does not require as much detailed data as *extrastats.py*:

###### *noclasses_extrastats.py* structure:
	[ 
		[ damage_given : 
			{ 
				*STEAM_0:#:########* : 
					{
						total_da : *total damage amt*,
						pdata : 
							{
								team : *Red|Blue*,
								pname : *player_name*,
								pnum : *#*
							}
						players : {
							*STEAM_0:#:########* : {
								da : *damage amount*,
								pdata : 
									{
										team : *Red|Blue*,
										pname : *player_name*,
										pnum : *#*
									}
							}
						}
					}
			}
		],
		[ damage_received : 
			{ 
				*STEAM_0:#:########* : 
					{
						total_da : *total damage amt*,
						pdata : 
							{
								team : *Red|Blue*,
								pname : *player_name*,
								pnum : *#*
							}
						players : {
							*STEAM_0:#:########* : {
								da : *damage amount*,
								pdata : 
									{
										team : *Red|Blue*,
										pname : *player_name*,
										pnum : *#*
									}
							}
						}
					}
			}
		]
	]


###### *extrastats.py* structure:
	[ 
		[ damage_given : 
			{ 
				*STEAM_0:#:########* : 
					{	
						total_da : *total damage amt*,
						pdata : 
							{
								team : *Red|Blue*,
								pname : *player_name*,
								pnum : *#*
							},
						classes : 
							{
								*class* : 
								{
									total_da : *total damage as class*,
									players : 
										{
											*STEAM_0:#:########* : 
												{
													total_da : *total damage to/from player*,
													pdata : 
														{
															team : *Red|Blue*,
															pname : *player_name*,
															pnum : *#*
														}
													classes : {
														*class* : 
														{
															da : *damage to/from player in that class*
														}
													}
												}		

										}
								}
							}
					}
			}
		],
		[ damage_received : 
			{ 
				*STEAM_0:#:########* : 
					{	
						total_da : *total damage amt*,
						pdata : 
							{
								team : *Red|Blue*,
								pname : *player_name*,
								pnum : *#*
							},
						classes : 
							{
								*class* : 
								{
									total_da : *total damage as class*,
									players : 
										{
											*STEAM_0:#:########* : 
												{
													total_da : *total damage to/from player*,
													pdata : 
														{
															team : *Red|Blue*,
															pname : *player_name*,
															pnum : *#*
														}
													classes : {
														*class* : 
														{
															da : *damage to/from player in that class*
														}
													}
												}		

										}
								}
							}
					}
			}
		]
	]

## Latest Update
###### 6/21/2014
> 1. Everything is pretty much done except for the issue with unicode characters.

## Questions/Issues
> Preferably, [create a new post here](https://github.com/mnemyx/logstfextra/issues/new). That way I can keep track of them, resolve them, and match commits to them.

## Thanks
> 1. [Logs.tf](https://logs.tf)
> 2. [F2's SourceMod Plugings (SupStats2)](http://teamfortress.tv/thread/13598/?page=1#post-1)
> 3. [Bootstrap](http://getbootstrap.com/)
> 4. [BootSwatchr](http://bootswatchr.com/)