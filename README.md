## SupStats2 - Extra Details Parser
> A python + php script that parses out TF2 logs generated by F2's SupStats2. *This will not work with SupStats! It needs the detailed damage logs in order to work.*


## Example
> ###### [*noclasses_extrastats.py* Example](http://mnemyx.net/tfstats/index.php?log=l0620012&classes=false)
>
> ###### [*extrastats.py* Example](http://mnemyx.net/tfstats/index.php?log=l0620012)


## How it works
###### Python Part:
> 1. Requires the log file's location as a command line argument
> 2. Parses through the log, saves each line as an element of an array/list, & closes the log file
> 3. Then parses through the array of lines
>	* Will only account for damage dealt between "Round_Start" and "Round_Win" conditions
> 4. Serializes the python dictionaries for damaged received and damage given via json.dumps()


###### PHP Part:
> 1. Uses a $_GET variable to get the log file's name
> 2. Invokes python script via shell_exec()
> 3. Uses json_decode() to parse the json string to associative arrays
> 4. Displays the data


## JSON Structure
###### There are 2 versions of extrastats.py: *noclasses_extrastats.py* and *extrastats.py*. Their structures differ a bit as *noclasses_extrastats.py* does not require as much detailed data as *extrastats.py*:

###### *noclasses_extrastats.py* structure:
	[ 
		[ damage_given : 
			{ 
				*player_name* : 
					{
						pdata : 
							{
								team : *Red|Blue*,
								steamid : *STEAM_0:#:########*,
								playernum : *#*
							}
						players : {
							*player_name* : {
								da : *damage amount*,
								pdata : 
									{
										team : *Red|Blue*,
										steamid : *STEAM_0:#:########*,
										playernum : *#*
									}
							}
						}
					}
			}
		],
		[ damage_received : 
			{ 
				*player_name* : 
					{
						pdata : 
							{
								team : *Red|Blue*,
								steamid : *STEAM_0:#:########*,
								playernum : *#*
							}
						players : {
							*player_name* : {
								da : *damage amount*,
								pdata : 
									{
										team : *Red|Blue*,
										steamid : *STEAM_0:#:########*,
										playernum : *#*
									}
							}
						}
					}
			}
		]
	]


###### *extrastats.py* structure:
	*coming soon*

## Latest Update
###### Version 0.1.0, 6/21/2014
> 1. Without class-specific damage received/dealt - done.
> 2. Need to work on: class-specific damage received/dealt, CSS. 
> 3. Current issues: special characters in username. Unicode is not PHP friendly at all.

## Questions/Issues
> Preferably, create a [new issue here](https://github.com/mnemyx/logstfextra/issues/new). That way I can keep track of them, resolve them, and match commits to them.

## Thanks
> 1. [Logs.tf](https://logs.tf)
> 2. [F2's SourceMod Plugings (SupStats2)](http://teamfortress.tv/thread/13598/?page=1#post-1)